{% extends "dashboard.base.html" %}
{% load static %}

{% block styles %}
<style>
    .table thead tr th,
    .table tbody tr td {
        border: 1px solid black !important;
        vertical-align: middle;
    }

    table {
        page-break-inside: auto !important;
    }

    tr {
        page-break-inside: avoid;
        page-break-after: auto !important;
    }

    td {
        white-space: normal !important;
    }

    thead {
        display: table-header-group !important;
    }

    .doc * {
        font-family: "Times New Roman", Times, serif !important;
        font-size: 14pt;
    }

    .doc-head * {
        font-size: 16pt;
    }
</style>
{% endblock styles %}

{% block content %}
<div class="no-print">
    <div class="mb-2 text-center">
        <h3>Gerenciador de Declarações RSC da ESUFRN</h3>
    </div>
    <a href="{% url 'formulario' %}" class="btn btn-secondary rounded-0 m-0" role="button">
        <i class="fas fa-plus mr-2" aria-hidden="true"></i> Inserir novo item
    </a>
    <hr />
</div>

<div class="doc">
    <table class="table table-bordered">
        <caption>Emitido em: {% now "d/m/Y" %} às {% now "H:i" %}</caption>
        <thead>
            <tr>
                <th class="text-center">Nº</th>
                <th class="text-center">Saberes e Competências</th>
                <th class="text-center">Descrição do item</th>
                <th class="text-center">Documentos comprobatórios</th>
                <th class="text-center">Unidade de Medida</th>
                <th class="text-center">Pontuação</th>
                <th class="text-center">Declarações</th>
                <th class="text-center">Pessoas</th>
                <th class="text-center">Solicitar documentação a chefia</th>
                <th class="text-center">Observações</th>
            </tr>
        </thead>
        <tbody>
            {% for pessoa in pessoas %}
            <tr>
                <td class="text-center">{{ pessoa.numero }}</td>
                <td>{{ pessoa.saberes_competencias }}</td>
                <td>{{ pessoa.descricao_item }}</td>
                <td>{{ pessoa.documentos_comprobatorios|linebreaksbr }}</td>
                <td class="text-center">{{ pessoa.unidade_medida }}</td>
                <td class="text-center">{{ pessoa.pontuacao|floatformat:2 }}</td>
                <td class="text-center">
                    {% for d in pessoa.declaracoes.all %}
                        <a href="{{ d.arquivo.url }}" target="_blank">Declaração {{ forloop.counter }}</a>{% if not forloop.last %}, {% endif %}
                    {% empty %}
                        &mdash;
                    {% endfor %}
                </td>
                <td>{{ pessoa.pessoas }}</td>
                <td class="text-center">
                    {% if pessoa.solicitar_documentacao_chefia %}Sim{% else %}Não{% endif %}
                </td>
                <td>{{ pessoa.observacoes }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="10">Nenhum resultado encontrado.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="no-print mt-5">
    <hr />
    <div class="row justify-content-end">
        <div class="col-auto">
            <button type="button" class="btn mb-1 btn-outline-secondary btn-sm" onclick="backTop();">
                Voltar para o topo <i class="fas fa-arrow-up" aria-hidden="true"></i>
            </button>
        </div>
        <div class="col-auto">
            <button type="button" class="btn mb-1 btn-outline-primary btn-sm" onclick="window.print();return false;">
                Imprimir <i class="fas fa-print" aria-hidden="true"></i>
            </button>
        </div>
    </div>
</div>
{% endblock content %}